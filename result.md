# Отчёт по рефакторингу Todo-приложения

## 1. Анализ до рефакторинга

| Метрика            | Проблемы до изменений                                                                 |
|--------------------|---------------------------------------------------------------------------------------|
| Качество кода      | - Нет типизации<br>- Повторяющийся код (`formatDate`, `formatTaskDate`)<br>- Монолитный `App.vue` (400+ строк)<br>- Логика + разметка + стили в одном файле |
| Архитектура        | - Всё в одном компоненте<br>- Нет разделения на логические блоки<br>- Нет глобального состояния |
| Производительность | - Лишние слушатели событий без отписки<br>- Утечки памяти|

## 2. Что было сделано

| № | Что сделал                                    | Результат                                      |
|---|-----------------------------------------------|------------------------------------------------|
| 1 | Вынес шапку в компонент `header-component`       | Чистый `App.vue`, переиспользуемый заголовок   |
| 2 | Разделил список задач на компоненты:          |                                                |
|   | • `todo-component-filter`                           | Фильтры                                |
|   | • `todo-component-add`                           | Форма добавления задачи                        |
|   | • `todo-component-list`                              | Список задач                                   |
|   | • `todo-component-statistics`                             | Статистика                                     |
|   | • `todo-component-activity`                             | Запись активности действий                                     |
| 3 | Добавил Pinia-store        | Глобальное реактивное состояние                |
| 4 | Убрал неиспользуемые переменные и computed    | `filteredUserTasks`, `userFilter`, `userTasks` |
| 5 | Вынес повторяющиеся функции в `utils` | Одна реализация `formatDate` и `formatTaskDate`|
| 6 | Добавил отписку от всех слушателей            | Нет утечек памяти                              |
| 7 | Реализовал сохранение задач в `localStorage`  | Данные сохраняются между сессиями              |
| 8 | Оптимизировал таймер удаления                 | Один `setTimeout` вместо множества             |

## 3. Состояние после рефакторинга

| Метрика            | Состояние сейчас                              |
|--------------------|-----------------------------------------------|
| Качество кода      | Чистый, читаемый, без дублирования            |
| Архитектура        | Компонентный подход + Pinia                   |
| Производительность | Нет утечек памяти, оптимальные обновления     |
| Безопасность       | Валидация данных из localStorage              |
